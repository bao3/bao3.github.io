<!DOCTYPE html>
<html>

<head>
    <title>
         Mac 上使用 Syncthing 同步文档 - 黑洞 
    </title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">

    <link rel="stylesheet" type="text/css" href="asset/yue.css">
    <link rel="stylesheet" type="text/css" href="asset/main.css">
    <link rel="stylesheet" type="text/css" href="asset/tomorrow.css">

    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="黑洞">

    <script src="asset/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
    <header class="yue site-header">
        <div class="wrapper">
            <a class="site-title" href="index.html">黑洞</a>
            <nav class="site-nav">
                <a href="#" class="menu-icon">
                    
                    <svg viewBox="0 0 18 15">
                        <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"
                        />
                        <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"
                        />
                        <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"
                        />
                    </svg>

                </a>
                <div class="trigger">
                    
                        <a class="page-link" href="index.html">Home</a>
                    
                        <a class="page-link" href="archives.html">Archives</a>
                    
                </div>
            </nav>
        </div>
    </header>
</body>

</html> <div class="page-content yue">
    <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
            <header class="post-header">
                <h1 class="post-title" itemprop="name headline">Mac 上使用 Syncthing 同步文档</h1>
                <p class="post-meta">
                    <time class="post-time" datetime="2016-08-02T21:59:44+08:00" itemprop="datePublished">2016/8/2</time>
                </p>
            </header>
            <div class="post-content" itemprop="articleBody">
                <p>最早的时候个人同步我使用的是 BTsync ，但这家伙后来改版后有诸多不便，于是转投了我一直看好的另一个同步工具 &mdash;- Syncthing 。开源且多平台 （ iOS 上不行，不过 iOS 除了照片也没什么可以同步的了 ），我最喜欢的就是可以自建一个 relay 。详细使用上比较简单，我今天只记录一下我在 Mac 上的操作。</p>

<p>操作需要使用 iTerm 或者 Terminal 请自备。</p>

<h2 id="toc_0">使用 Brew Cask 安装</h2>

<p>其实你也可以自己下载安装包 (<a href="https://github.com/syncthing/syncthing/releases)%EF%BC%8C%E8%A7%A3%E5%8E%8B%E5%90%8E%E6%8A%8A">https://github.com/syncthing/syncthing/releases)，解压后把</a>&ldquo; syncthing &rdquo; 这个可执行文件放到 <code>/usr/local/bin</code> 。（ 我建议你养成好习惯，所有自己下载安装的终端都丢这里 ）</p>

<p>如果你有了 brew 则可以</p>

<pre><code>brew tap caskroom/cask
brew tap caskroom/versions
brew cask install syncthing 

</code></pre>

<p>会看到下图<br/>
<img src="media/14623502546429/14623510408640.jpg" alt="syncthing安装"/></p>

<p>然后进入上图中的 <code>open /opt/homebrew-cask/Caskroom/syncthing/0.12.22</code> 然后进入安装文件夹（如果你有多个版本，则进入最高的那个就可以了），找到 <code>syncthing.plist</code> ，通常位置安装目录的 <code>etc/macosx-launchd</code> 。</p>

<h2 id="toc_1">修改配置文件</h2>

<p>在 Finder 里，不要选中任何文件的情况下，点击如下图标，拷贝为路径，如果你的系统没有这个选项，请试着按下 Option 键。<br/>
<img src="media/14623502546429/14623515346988.jpg" alt=""/></p>

<p>接着在 iTerm 或者 Terminal 里输入</p>

<pre><code>cd $(pbpaste)
sed -i .bak &quot;s/USERNAME/$(whoami)/g&quot; ./syncthing.plist
sed -i .bak &quot;s/\Users\/$(whoami)\/bin/usr\/local\/bin/g&quot; ./syncthing.plist
sed -n &#39;/Users/p&#39; ./syncthing.plist
sed -n &#39;/local/p&#39; ./syncthing.plist
</code></pre>

<p>你应该会看到输出了带你的用户名的几行以及带有 syncthing的一行：</p>

<pre><code>        &lt;string&gt;/Users/bao3&lt;/string&gt;
    &lt;string&gt;/Users/bao3/Library/Logs/Syncthing.log&lt;/string&gt;
    &lt;string&gt;/Users/bao3/Library/Logs/Syncthing-Errors.log&lt;/string&gt;
        &lt;string&gt;/usr/local/bin/syncthing&lt;/string&gt;
</code></pre>

<h2 id="toc_2">加载启动文件</h2>

<p>比较简单，我是直接 copy 过去:</p>

<pre><code> cp syncthing.plist  ~/Library/LaunchAgents/syncthing.plist
  launchctl load ~/Library/LaunchAgents/syncthing.plist 
</code></pre>

<p>随后会打开网页，让你登录 <a href="http://127.0.0.1:8384">http://127.0.0.1:8384</a></p>

            </div>
            <div>
                
                
                
            </div>
        </article>
    </div>
</div>  <footer id="footer" class="yue">
    <div class="wrapper">
        <p>© Copyright 2014 - 2017 by <a href="https://twitter.com/Tisoga">@Tisoga</a> and powered by <a href="http://zh.mweb.im/">Mweb</a></p>
    </div>
</footer>

